<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LEAP 英単語学習</title>
    <style>
        /* ここからCSS（デザイン） */
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: #f4f4f9;
            color: #333;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px 0;
        }
        .quiz-container {
            background-color: #fff;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            width: 90%;
            max-width: 500px;
            text-align: center;
        }
        h1 {
            color: #4a4a4a;
            margin-top: 0;
            font-size: 1.8em;
        }
        #question-sentence {
            font-size: 1.5em;
            font-weight: bold;
            color: #333;
            margin: 25px 0;
            line-height: 1.4;
        }
        #translation {
            font-size: 1em;
            color: #6c757d;
            margin-bottom: 25px;
        }
        #choices-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 25px;
        }
        .choice-button {
            width: 100%;
            padding: 15px;
            font-size: 1.1em;
            color: #007bff;
            background-color: #fff;
            border: 2px solid #007bff;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .choice-button:hover:not(:disabled) {
            background-color: #007bff;
            color: #fff;
        }
        .choice-button:disabled {
            cursor: not-allowed;
            opacity: 0.7;
        }
        .choice-button.correct {
            background-color: #28a745 !important;
            border-color: #28a745 !important;
            color: #fff !important;
        }
        .choice-button.incorrect {
            background-color: #dc3545 !important;
            border-color: #dc3545 !important;
            color: #fff !important;
        }
        #result-display {
            font-size: 1.3em;
            font-weight: bold;
            min-height: 30px;
        }
        /* ===== ここから追加・変更したスタイル ===== */
        #answer-details {
            background-color: #e9f5ff;
            border-left: 5px solid #007bff;
            border-radius: 8px;
            padding: 15px;
            margin-top: 20px;
            text-align: left;
            display: none; /* 最初は非表示 */
            animation: fadeIn 0.5s ease;
        }
        #answer-details .pos {
            font-weight: bold;
            color: #005a9c;
            margin-right: 10px;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        /* ========================================= */
        #next-button {
            width: 100%;
            padding: 15px;
            font-size: 1.2em;
            color: #fff;
            background-color: #5a6268;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            margin-top: 20px;
            transition: background-color 0.3s;
        }
        #next-button:hover {
            background-color: #474d52;
        }
    </style>
</head>
<body>

    <div class="quiz-container">
        <h1>LEAP 英単語学習</h1>
        <p id="question-sentence"></p>
        <p id="translation"></p>
        <div id="choices-container"></div>
        <p id="result-display"></p>
        <div id="answer-details"></div>
        <button id="next-button" style="display: none;">次の問題へ</button>
    </div>

    <script>
    // ここからJavaScript（アプリの動作）

    // ====== クイズのデータ ======
    // detailsオブジェクトに品詞(pos)と意味(meaning)を追加
    const quizzes = [
        {
            question: "He is [] at work.",
            translation: "彼は仕事をいい加減にやる",
            choices: ["polite", "rude", "lonely", "lazy"],
            answer: "lazy",
            details: {
                pos: "形",
                meaning: "(やる気がなく)怠惰な、いい加減な"
            }
        },
        {
            question: "a [] rule",
            translation: "厳しい規則",
            choices: ["strict", "difficult", "hard", "different"],
            answer: "borrow",
            details: {
                pos: "形",
                meaning: "厳しい"
            }
        },
        {
            question: "The [] Duckling.",
            translation: "『醜いアヒルの子』",
            choices: ["Dirty", "Ugly", "Uncomfortable", "False"],
            answer: "Ugly",
            details: {
                pos: "形",
                meaning: "醜い"
            }
        },
        {
            question: "a highly [] woman",
            translation: "きわめて聡明な女性",
            choices: ["sadness", "anxiety", "courage", "intelligent"],
            answer: "intelligent",
            details: {
                pos: "形",
                meaning: "知的な、賢い"
            }
        },
        {
            question: "Don't be []!",
            translation: "ばかなことを言うな！",
            choices: ["likely", "unlikely", "silly", "certain"],
            answer: "silly",
            details: {
                pos: "形",
                meaning: "ばかな"
            }
        }
    ];
    // =============================

    let currentQuiz;
    let usedIndexes = [];
    let score = 0;

    const questionSentenceEl = document.getElementById('question-sentence');
    const translationEl = document.getElementById('translation');
    const choicesContainerEl = document.getElementById('choices-container');
    const resultDisplayEl = document.getElementById('result-display');
    const answerDetailsEl = document.getElementById('answer-details'); // 詳細表示エリアを取得
    const nextButton = document.getElementById('next-button');

    function loadNextQuiz() {
        if (usedIndexes.length === quizzes.length) {
            showFinalResult();
            return;
        }
        let newIndex;
        do {
            newIndex = Math.floor(Math.random() * quizzes.length);
        } while (usedIndexes.includes(newIndex));

        usedIndexes.push(newIndex);
        currentQuiz = quizzes[newIndex];
        displayQuiz();
    }

    function displayQuiz() {
        // 各要素をリセット
        resultDisplayEl.textContent = '';
        answerDetailsEl.style.display = 'none'; // 詳細エリアを隠す
        nextButton.style.display = 'none';
        choicesContainerEl.innerHTML = '';

        // 問題と選択肢を表示
        questionSentenceEl.textContent = currentQuiz.question;
        translationEl.textContent = currentQuiz.translation;

        currentQuiz.choices.forEach(choice => {
            const button = document.createElement('button');
            button.textContent = choice;
            button.className = 'choice-button';
            button.addEventListener('click', () => checkAnswer(choice, button));
            choicesContainerEl.appendChild(button);
        });
    }

    function checkAnswer(selectedChoice, selectedButton) {
        // すべてのボタンを無効化
        const choiceButtons = document.querySelectorAll('.choice-button');
        choiceButtons.forEach(btn => {
            btn.disabled = true;
            if (btn.textContent === currentQuiz.answer) {
                btn.classList.add('correct');
            }
        });

        // 正誤判定
        if (selectedChoice === currentQuiz.answer) {
            resultDisplayEl.textContent = '正解！';
            resultDisplayEl.style.color = 'green';
            score++;
        } else {
            selectedButton.classList.add('incorrect');
            resultDisplayEl.textContent = '不正解...';
            resultDisplayEl.style.color = 'red';
        }

        // 正解の詳細を表示する
        showAnswerDetails();

        nextButton.style.display = 'block';
        nextButton.focus();
    }

    // 正解の詳細を表示する関数（新規追加）
    function showAnswerDetails() {
        const details = currentQuiz.details;
        if (details) {
            answerDetailsEl.innerHTML = `<span class="pos">[${details.pos}]</span> ${details.meaning}`;
            answerDetailsEl.style.display = 'block';
        }
    }

    function showFinalResult() {
        questionSentenceEl.textContent = '全問終了！';
        translationEl.textContent = `あなたのスコアは ${quizzes.length} 問中 ${score} 問正解でした！`;
        choicesContainerEl.innerHTML = '';
        resultDisplayEl.textContent = '';
        answerDetailsEl.style.display = 'none'; // 詳細エリアを隠す
        nextButton.style.display = 'none';
    }

    nextButton.addEventListener('click', loadNextQuiz);

    loadNextQuiz();
    </script>

</body>
</html>
